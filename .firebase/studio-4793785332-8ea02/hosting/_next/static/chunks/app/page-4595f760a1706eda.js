(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4026:function(e,t,i){Promise.resolve().then(i.bind(i,746))},746:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return I}});var a=i(7437),o=i(2265),n=i(5511),s=i(3755),r=i(2879),l=i(4962),d=i(4839),u=i(5137),c=i(8023),p=i(7229),m=i(2012),h=i(3819);function g(e){return(0,h.ZP)("MuiCard",e)}(0,m.Z)("MuiCard",["root"]);let f=e=>{let{classes:t}=e;return(0,u.Z)({root:["root"]},g,t)},v=(0,c.ZP)(l.Z,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),_=o.forwardRef(function(e,t){let i=(0,p.i)({props:e,name:"MuiCard"}),{className:o,raised:n=!1,...s}=i,r={...i,raised:n},l=f(r);return(0,a.jsx)(v,{className:(0,d.Z)(l.root,o),elevation:n?8:void 0,ref:t,ownerState:r,...s})});function b(e){return(0,h.ZP)("MuiCardContent",e)}(0,m.Z)("MuiCardContent",["root"]);let x=e=>{let{classes:t}=e;return(0,u.Z)({root:["root"]},b,t)},C=(0,c.ZP)("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),P=o.forwardRef(function(e,t){let i=(0,p.i)({props:e,name:"MuiCardContent"}),{className:o,component:n="div",...s}=i,r={...i,component:n},l=x(r);return(0,a.jsx)(C,{as:n,className:(0,d.Z)(l.root,o),ownerState:r,ref:t,...s})});var j=i(3555),E=i(8358),Z=i(7138),y=i(8593),w=i(357);function I(){let[e,t]=(0,o.useState)([]),[i,d]=(0,o.useState)(!0),[u,c]=(0,o.useState)(null),[p,m]=(0,o.useState)(void 0),[h,g]=(0,o.useState)(!1),[f,v]=(0,o.useState)(!1),b=!!w.env.NEXT_PUBLIC_POSTS_API_URL;(0,o.useEffect)(()=>{(async()=>{d(!0);try{let e=await (0,y.T$)(5);t(e),e.length>0&&m(e[e.length-1].slug),e.length<5&&v(!0),c(null)}catch(e){c(e.message||"Erro ao buscar posts")}finally{d(!1)}})()},[]);let x=async()=>{if(!h&&!f){g(!0);try{let e=await (0,y.T$)(5,p);t(t=>[...t,...e]),e.length>0&&m(e[e.length-1].slug),e.length<5&&v(!0)}catch(e){c(e.message||"Erro ao carregar mais posts")}finally{g(!1)}}};return i?(0,a.jsx)("main",{className:"container",children:(0,a.jsx)(n.Z,{children:"Carregando posts..."})}):(0,a.jsxs)("main",{className:"container",children:[(0,a.jsx)(n.Z,{variant:"h4",sx:{mb:1,fontWeight:700},children:"OptiLog"}),(0,a.jsx)(n.Z,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:"Lista de posts. Integra\xe7\xe3o com API externa \xe9 opcional (defina `NEXT_PUBLIC_POSTS_API_URL`)."}),(0,a.jsx)(s.Z,{"aria-live":"polite",children:u&&(0,a.jsxs)(r.Z,{severity:"error",sx:{mb:2},children:["Erro: ",u]})}),!b&&!1,!u&&0===e.length&&(0,a.jsx)(l.Z,{variant:"outlined",sx:{p:2,mb:2},children:(0,a.jsx)(n.Z,{children:"Nenhum post encontrado."})}),!u&&e.map(e=>(0,a.jsx)(_,{variant:"outlined",sx:{mb:2},children:(0,a.jsxs)(P,{children:[(0,a.jsx)(Z.default,{href:"/posts/".concat(e.slug),style:{textDecoration:"none",color:"inherit"},children:(0,a.jsx)(n.Z,{variant:"h6",sx:{fontWeight:600},children:e.title})}),(0,a.jsx)(n.Z,{variant:"body2",sx:{mt:1,color:"text.secondary"},children:e.content}),(0,a.jsx)(s.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2},children:(0,a.jsx)(j.Z,{label:e.is_published?"Publicado":"Rascunho",size:"small",color:e.is_published?"success":"default"})})]})},e.id)),!u&&!f&&(0,a.jsx)(s.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mt:2},children:(0,a.jsx)(E.Z,{variant:"contained",onClick:x,disabled:h,children:h?"Carregando...":"Carregar mais"})})]})}},6353:function(e,t,i){"use strict";i.d(t,{E7:function(){return c},l2:function(){return d},zA:function(){return u}});var a=i(5236);let o="AIzaSyCErAtVhtvFAeA2_-7-AC9-sK-0QXkWUAA",n="studio-4793785332-8ea02.firebaseapp.com",s="studio-4793785332-8ea02",r="1:435822865745:web:51bc089558ac12631ef770",l=!!(o&&n&&s&&r),d=l?(0,a.C6)().length?(0,a.Mq)():(0,a.ZF)({apiKey:o,authDomain:n,projectId:s,storageBucket:"studio-4793785332-8ea02.firebasestorage.app",messagingSenderId:"435822865745",appId:r}):null;async function u(){if(!l||!d)return null;let{getFirestore:e}=await Promise.all([i.e(358),i.e(288)]).then(i.bind(i,9842));return e(d)}async function c(){if(!l||!d)return null;let{getAuth:e}=await Promise.all([i.e(139),i.e(597)]).then(i.bind(i,5735));return e(d)}},8593:function(e,t,i){"use strict";i.d(t,{T$:function(){return s},s$:function(){return n}});var a=i(6353);let o=i(357).env.NEXT_PUBLIC_POSTS_API_URL,n=[{id:"demo-1",slug:"boas-vindas",title:"Boas-vindas ao Optilog!",content:"<p>Esta \xe9 uma postagem de demonstra\xe7\xe3o exibida quando o Firebase n\xe3o est\xe1 configurado.</p>",is_published:!0,author_id:"demo-user",date:"2024-01-15"},{id:"demo-2",slug:"como-configurar",title:"Como configurar sua fonte de dados",content:"<p>Defina as vari\xe1veis <code>NEXT_PUBLIC_FIREBASE_*</code> para integrar seu backend Firestore.</p>",is_published:!0,author_id:"demo-user",date:"2024-02-10"},{id:"demo-3",slug:"ejg-apresentacao",title:"Apresenta\xe7\xe3o EJG",content:"<p>Bem-vindo ao preview da EJG com Firebase Hosting (7 dias).</p><p>Este canal expira automaticamente e \xe9 ideal para valida\xe7\xe3o r\xe1pida.</p>",is_published:!0,author_id:"demo-user",date:"2024-03-05"},{id:"demo-4",slug:"ejg-cases",title:"Casos e Resultados EJG",content:"<ul><li>Redu\xe7\xe3o de custos log\xedsticos</li><li>Melhoria no last-mile</li><li>Integra\xe7\xe3o com ERP</li></ul>",is_published:!0,author_id:"demo-user",date:"2024-04-18"},{id:"demo-5",slug:"ejg-roadmap",title:"Roadmap Optilog \xd7 EJG",content:"<p>Planejamento de entregas, SLAs e integra\xe7\xf5es priorit\xe1rias.</p>",is_published:!0,author_id:"demo-user",date:"2024-05-12"},{id:"demo-6",slug:"ejg-faqs",title:"FAQs EJG",content:"<ul><li>Como acesso o dashboard? Fa\xe7a login e v\xe1 em Dashboard.</li><li>Posso integrar com ERP? Sim, via APIs.</li><li>O preview dura quanto? 7 dias.</li></ul>",is_published:!0,author_id:"demo-user",date:"2024-06-20"},{id:"demo-7",slug:"ejg-termos",title:"Termos de Uso EJG",content:"<p>Termos e condi\xe7\xf5es para uso da plataforma Optilog pela EJG.</p>",is_published:!0,author_id:"demo-user",date:"2024-06-21"},{id:"demo-8",slug:"ejg-politicas",title:"Pol\xedticas de Privacidade EJG",content:"<p>Pol\xedtica de privacidade e prote\xe7\xe3o de dados em conformidade com LGPD.</p>",is_published:!0,author_id:"demo-user",date:"2024-06-22"}];async function s(e,t){if(o)try{let i=o.replace(/\/$/,""),a="".concat(i,"/posts?limit=").concat(encodeURIComponent(e)).concat(t?"&after=".concat(encodeURIComponent(t)):""),n=await fetch(a,{cache:"no-store"});if(n.ok){let e=await n.json();if(Array.isArray(e))return e.map(e=>{var t,i,a,o,n,s,r,l,d,u,c,p,m;return{id:null!==(a=null!==(i=null!==(t=e.id)&&void 0!==t?t:e._id)&&void 0!==i?i:e.slug)&&void 0!==a?a:Math.random().toString(36).slice(2),slug:null!==(s=e.slug)&&void 0!==s?s:String(null!==(n=null!==(o=e.id)&&void 0!==o?o:e._id)&&void 0!==n?n:""),title:null!==(r=e.title)&&void 0!==r?r:"Sem t\xedtulo",content:null!==(d=null!==(l=e.content)&&void 0!==l?l:e.description)&&void 0!==d?d:"",is_published:!!(null===(c=null!==(u=e.is_published)&&void 0!==u?u:e.published)||void 0===c||c),author_id:null!==(m=null!==(p=e.author_id)&&void 0!==p?p:e.authorId)&&void 0!==m?m:null}})}}catch(e){console.warn("Erro na API externa (pagina\xe7ao), usando fallback:",e)}let s=await (0,a.zA)();if(s)try{let{collection:a,getDocs:o,query:n,where:r,limit:l,orderBy:d,startAfter:u}=await Promise.all([i.e(358),i.e(288)]).then(i.bind(i,9842)),c=t?n(a(s,"posts"),r("is_published","==",!0),d("slug"),u(t),l(e)):n(a(s,"posts"),r("is_published","==",!0),d("slug"),l(e));return(await o(c)).docs.map(e=>({id:e.id,...e.data()}))}catch(o){console.warn("Permiss\xe3o/erro ao paginar Firestore, usando demo:",o);let i=[...n].sort((e,t)=>e.slug.localeCompare(t.slug)),a=0;if(t){let e=i.findIndex(e=>e.slug===t);a=e>=0?e+1:0}return i.slice(a,a+e)}let r=[...n].sort((e,t)=>e.slug.localeCompare(t.slug)),l=0;if(t){let e=r.findIndex(e=>e.slug===t);l=e>=0?e+1:0}return r.slice(l,l+e)}[...n]}},function(e){e.O(0,[248,236,138,124,491,879,968,971,23,744],function(){return e(e.s=4026)}),_N_E=e.O()}]);