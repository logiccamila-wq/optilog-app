(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[991],{3576:function(e,t,l){Promise.resolve().then(l.bind(l,9012))},9012:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return s}});var a=l(7437),i=l(2265),o=l(8593),r=l(7138),n=l(1169);function s(){var e;let t=e=>{if(!e)return null;let t=new Date(e);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"long",year:"numeric"}).format(t)},l=(0,n.useSearchParams)(),s=(0,n.useRouter)(),d=e=>{let t=new URLSearchParams(Array.from(l.entries()));Object.entries(e).forEach(e=>{let[l,a]=e;null===a?t.delete(l):t.set(l,a)}),s.replace("?".concat(t.toString()),{scroll:!1})},u=l.get("sort"),c="oldest"===u||"title"===u?u:"newest",g=l.get("range"),p="7"===g||"30"===g?g:"all",m=l.get("category"),f="ejg"===m||"general"===m?m:"all",h=parseInt(null!==(e=l.get("page"))&&void 0!==e?e:"1",10),b=Number.isFinite(h)&&h>0?h:1,v=new Date,x=(0,i.useMemo)(()=>{let e=o.s$;if("ejg"===f&&(e=e.filter(e=>e.slug.startsWith("ejg-"))),"general"===f&&(e=e.filter(e=>!e.slug.startsWith("ejg-"))),"all"!==p){let t="7"===p?7:30,l=v.getTime()-864e5*t;e=e.filter(e=>!!e.date&&new Date(e.date).getTime()>=l)}return e},[l]),j=(0,i.useMemo)(()=>{let e=[...x];return e.sort((e,t)=>{if("title"===c)return e.title.localeCompare(t.title);let l=e.date?new Date(e.date).getTime():null,a=t.date?new Date(t.date).getTime():null;return null!==l&&null!==a&&l!==a?"newest"===c?a-l:l-a:null===l&&null!==a?1:null!==l&&null===a?-1:e.title.localeCompare(t.title)}),e},[l]),_=Math.max(1,Math.ceil(j.length/6)),y=Math.min(_,Math.max(1,b)),w=(y-1)*6,P=j.slice(w,w+6);return(0,a.jsxs)("div",{style:{maxWidth:800,margin:"2rem auto",padding:"1rem"},children:[(0,a.jsx)("h1",{children:"Posts"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"1rem",flexWrap:"wrap"},children:[(0,a.jsx)("button",{onClick:()=>d({sort:"newest",page:"1"}),style:{padding:"0.25rem 0.5rem",borderRadius:4,border:"1px solid #444",background:"newest"===c?"#222":"#111",color:"#fff"},children:"Mais recentes"}),(0,a.jsx)("button",{onClick:()=>d({sort:"oldest",page:"1"}),style:{padding:"0.25rem 0.5rem",borderRadius:4,border:"1px solid #444",background:"oldest"===c?"#222":"#111",color:"#fff"},children:"Mais antigos"}),(0,a.jsx)("button",{onClick:()=>d({sort:"title",page:"1"}),style:{padding:"0.25rem 0.5rem",borderRadius:4,border:"1px solid #444",background:"title"===c?"#222":"#111",color:"#fff"},children:"T\xedtulo A–Z"}),(0,a.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[(0,a.jsx)("span",{style:{color:"#bbb"},children:"Per\xedodo"}),(0,a.jsxs)("select",{value:p,onChange:e=>d({range:"all"===e.target.value?null:e.target.value,page:"1"}),style:{padding:"0.25rem",borderRadius:4,background:"#111",color:"#fff",border:"1px solid #444"},children:[(0,a.jsx)("option",{value:"all",children:"Todos"}),(0,a.jsx)("option",{value:"7",children:"\xdaltimos 7 dias"}),(0,a.jsx)("option",{value:"30",children:"\xdaltimos 30 dias"})]})]}),(0,a.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[(0,a.jsx)("span",{style:{color:"#bbb"},children:"Categoria"}),(0,a.jsxs)("select",{value:f,onChange:e=>d({category:"all"===e.target.value?null:e.target.value,page:"1"}),style:{padding:"0.25rem",borderRadius:4,background:"#111",color:"#fff",border:"1px solid #444"},children:[(0,a.jsx)("option",{value:"all",children:"Todas"}),(0,a.jsx)("option",{value:"ejg",children:"EJG"}),(0,a.jsx)("option",{value:"general",children:"Geral"})]})]})]}),(0,a.jsx)("ul",{children:P.map(e=>(0,a.jsxs)("li",{style:{marginBottom:"0.5rem"},children:[(0,a.jsx)(r.default,{href:"/posts/".concat(e.slug),children:e.title}),e.date&&(0,a.jsxs)("span",{style:{marginLeft:"0.5rem",color:"#888"},children:["— ",t(e.date)]}),e.date&&new Date(e.date).getTime()>=new Date().getTime()-6048e5&&(0,a.jsx)("span",{style:{marginLeft:"0.5rem",padding:"0.1rem 0.3rem",borderRadius:4,background:"#224422",color:"#c8f7c5",fontSize:12},children:"Novo"})]},e.slug))}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginTop:"1rem"},children:[(0,a.jsx)("button",{disabled:y<=1,onClick:()=>d({page:String(y-1)}),style:{padding:"0.25rem 0.5rem",borderRadius:4,border:"1px solid #444",background:y<=1?"#222":"#111",color:"#fff"},children:"Anterior"}),(0,a.jsxs)("span",{style:{color:"#bbb"},children:["P\xe1gina ",y," de ",_]}),(0,a.jsx)("button",{disabled:y>=_,onClick:()=>d({page:String(y+1)}),style:{padding:"0.25rem 0.5rem",borderRadius:4,border:"1px solid #444",background:y>=_?"#222":"#111",color:"#fff"},children:"Pr\xf3xima"})]})]})}},6353:function(e,t,l){"use strict";l.d(t,{E7:function(){return c},l2:function(){return d},zA:function(){return u}});var a=l(5236);let i="AIzaSyCErAtVhtvFAeA2_-7-AC9-sK-0QXkWUAA",o="studio-4793785332-8ea02.firebaseapp.com",r="studio-4793785332-8ea02",n="1:435822865745:web:51bc089558ac12631ef770",s=!!(i&&o&&r&&n),d=s?(0,a.C6)().length?(0,a.Mq)():(0,a.ZF)({apiKey:i,authDomain:o,projectId:r,storageBucket:"studio-4793785332-8ea02.firebasestorage.app",messagingSenderId:"435822865745",appId:n}):null;async function u(){if(!s||!d)return null;let{getFirestore:e}=await Promise.all([l.e(358),l.e(288)]).then(l.bind(l,9842));return e(d)}async function c(){if(!s||!d)return null;let{getAuth:e}=await Promise.all([l.e(139),l.e(597)]).then(l.bind(l,5735));return e(d)}},8593:function(e,t,l){"use strict";l.d(t,{T$:function(){return r},s$:function(){return o}});var a=l(6353);let i=l(357).env.NEXT_PUBLIC_POSTS_API_URL,o=[{id:"demo-1",slug:"boas-vindas",title:"Boas-vindas ao Optilog!",content:"<p>Esta \xe9 uma postagem de demonstra\xe7\xe3o exibida quando o Firebase n\xe3o est\xe1 configurado.</p>",is_published:!0,author_id:"demo-user",date:"2024-01-15"},{id:"demo-2",slug:"como-configurar",title:"Como configurar sua fonte de dados",content:"<p>Defina as vari\xe1veis <code>NEXT_PUBLIC_FIREBASE_*</code> para integrar seu backend Firestore.</p>",is_published:!0,author_id:"demo-user",date:"2024-02-10"},{id:"demo-3",slug:"ejg-apresentacao",title:"Apresenta\xe7\xe3o EJG",content:"<p>Bem-vindo ao preview da EJG com Firebase Hosting (7 dias).</p><p>Este canal expira automaticamente e \xe9 ideal para valida\xe7\xe3o r\xe1pida.</p>",is_published:!0,author_id:"demo-user",date:"2024-03-05"},{id:"demo-4",slug:"ejg-cases",title:"Casos e Resultados EJG",content:"<ul><li>Redu\xe7\xe3o de custos log\xedsticos</li><li>Melhoria no last-mile</li><li>Integra\xe7\xe3o com ERP</li></ul>",is_published:!0,author_id:"demo-user",date:"2024-04-18"},{id:"demo-5",slug:"ejg-roadmap",title:"Roadmap Optilog \xd7 EJG",content:"<p>Planejamento de entregas, SLAs e integra\xe7\xf5es priorit\xe1rias.</p>",is_published:!0,author_id:"demo-user",date:"2024-05-12"},{id:"demo-6",slug:"ejg-faqs",title:"FAQs EJG",content:"<ul><li>Como acesso o dashboard? Fa\xe7a login e v\xe1 em Dashboard.</li><li>Posso integrar com ERP? Sim, via APIs.</li><li>O preview dura quanto? 7 dias.</li></ul>",is_published:!0,author_id:"demo-user",date:"2024-06-20"},{id:"demo-7",slug:"ejg-termos",title:"Termos de Uso EJG",content:"<p>Termos e condi\xe7\xf5es para uso da plataforma Optilog pela EJG.</p>",is_published:!0,author_id:"demo-user",date:"2024-06-21"},{id:"demo-8",slug:"ejg-politicas",title:"Pol\xedticas de Privacidade EJG",content:"<p>Pol\xedtica de privacidade e prote\xe7\xe3o de dados em conformidade com LGPD.</p>",is_published:!0,author_id:"demo-user",date:"2024-06-22"}];async function r(e,t){if(i)try{let l=i.replace(/\/$/,""),a="".concat(l,"/posts?limit=").concat(encodeURIComponent(e)).concat(t?"&after=".concat(encodeURIComponent(t)):""),o=await fetch(a,{cache:"no-store"});if(o.ok){let e=await o.json();if(Array.isArray(e))return e.map(e=>{var t,l,a,i,o,r,n,s,d,u,c,g,p;return{id:null!==(a=null!==(l=null!==(t=e.id)&&void 0!==t?t:e._id)&&void 0!==l?l:e.slug)&&void 0!==a?a:Math.random().toString(36).slice(2),slug:null!==(r=e.slug)&&void 0!==r?r:String(null!==(o=null!==(i=e.id)&&void 0!==i?i:e._id)&&void 0!==o?o:""),title:null!==(n=e.title)&&void 0!==n?n:"Sem t\xedtulo",content:null!==(d=null!==(s=e.content)&&void 0!==s?s:e.description)&&void 0!==d?d:"",is_published:!!(null===(c=null!==(u=e.is_published)&&void 0!==u?u:e.published)||void 0===c||c),author_id:null!==(p=null!==(g=e.author_id)&&void 0!==g?g:e.authorId)&&void 0!==p?p:null}})}}catch(e){console.warn("Erro na API externa (pagina\xe7ao), usando fallback:",e)}let r=await (0,a.zA)();if(r)try{let{collection:a,getDocs:i,query:o,where:n,limit:s,orderBy:d,startAfter:u}=await Promise.all([l.e(358),l.e(288)]).then(l.bind(l,9842)),c=t?o(a(r,"posts"),n("is_published","==",!0),d("slug"),u(t),s(e)):o(a(r,"posts"),n("is_published","==",!0),d("slug"),s(e));return(await i(c)).docs.map(e=>({id:e.id,...e.data()}))}catch(i){console.warn("Permiss\xe3o/erro ao paginar Firestore, usando demo:",i);let l=[...o].sort((e,t)=>e.slug.localeCompare(t.slug)),a=0;if(t){let e=l.findIndex(e=>e.slug===t);a=e>=0?e+1:0}return l.slice(a,a+e)}let n=[...o].sort((e,t)=>e.slug.localeCompare(t.slug)),s=0;if(t){let e=n.findIndex(e=>e.slug===t);s=e>=0?e+1:0}return n.slice(s,s+e)}[...o]}},function(e){e.O(0,[236,138,971,23,744],function(){return e(e.s=3576)}),_N_E=e.O()}]);