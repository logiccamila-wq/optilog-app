(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[333],{5144:function(e,n,t){Promise.resolve().then(t.bind(t,5372))},5372:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return s},dynamic:function(){return l}});var i=t(7437),o=t(2265),a=t(8593);let l="force-dynamic";function s(e){let{params:n}=e,{slug:t}=n,[l,s]=(0,o.useState)(null),[r,u]=(0,o.useState)(!0),[c,d]=(0,o.useState)(null);return((0,o.useEffect)(()=>{(async()=>{try{let e=await (0,a.xl)(t);s(e),d(null)}catch(e){d(e.message||"Erro ao carregar post")}finally{u(!1)}})()},[t]),r)?(0,i.jsx)("main",{className:"container",children:(0,i.jsx)("p",{children:"Carregando post..."})}):l?(0,i.jsx)("main",{className:"container",children:(0,i.jsxs)("article",{className:"post-card",children:[(0,i.jsx)("h1",{className:"post-title",children:l.title}),(0,i.jsx)("p",{className:"post-content",children:l.content})]})}):(0,i.jsx)("main",{className:"container",children:(0,i.jsx)("p",{children:"Post n\xe3o encontrado."})})}},6353:function(e,n,t){"use strict";t.d(n,{E7:function(){return d},l2:function(){return u},zA:function(){return c}});var i=t(5236);let o="AIzaSyCErAtVhtvFAeA2_-7-AC9-sK-0QXkWUAA",a="studio-4793785332-8ea02.firebaseapp.com",l="studio-4793785332-8ea02",s="1:435822865745:web:51bc089558ac12631ef770",r=!!(o&&a&&l&&s),u=r?(0,i.C6)().length?(0,i.Mq)():(0,i.ZF)({apiKey:o,authDomain:a,projectId:l,storageBucket:"studio-4793785332-8ea02.firebasestorage.app",messagingSenderId:"435822865745",appId:s}):null;async function c(){if(!r||!u)return null;let{getFirestore:e}=await Promise.all([t.e(358),t.e(288)]).then(t.bind(t,9842));return e(u)}async function d(){if(!r||!u)return null;let{getAuth:e}=await Promise.all([t.e(139),t.e(597)]).then(t.bind(t,5735));return e(u)}},8593:function(e,n,t){"use strict";t.d(n,{T$:function(){return s},xl:function(){return l}});var i=t(6353);let o=t(357).env.NEXT_PUBLIC_POSTS_API_URL,a=[{id:"demo-1",slug:"boas-vindas",title:"Boas-vindas ao Optilog!",content:"Esta \xe9 uma postagem de demonstra\xe7\xe3o exibida quando o Firebase n\xe3o est\xe1 configurado.",is_published:!0,author_id:"demo-user"},{id:"demo-2",slug:"como-configurar",title:"Como configurar sua fonte de dados",content:"Defina as vari\xe1veis NEXT_PUBLIC_FIREBASE_* para integrar seu backend Firestore.",is_published:!0,author_id:"demo-user"}];async function l(e){if(o)try{let t=o.replace(/\/$/,""),i=await fetch("".concat(t,"/posts/").concat(encodeURIComponent(e)),{cache:"no-store"});if(i.ok||(i=await fetch("".concat(t,"/posts?slug=").concat(encodeURIComponent(e)),{cache:"no-store"})),i.ok){let t=await i.json(),o=Array.isArray(t)?t[0]:t;if(o){var n,l,s,r,u,c,d,f,p,h;return{id:null!==(l=null!==(n=o.id)&&void 0!==n?n:o._id)&&void 0!==l?l:e,slug:null!==(s=o.slug)&&void 0!==s?s:e,title:null!==(r=o.title)&&void 0!==r?r:"Sem t\xedtulo",content:null!==(c=null!==(u=o.content)&&void 0!==u?u:o.description)&&void 0!==c?c:"",is_published:!!(null===(f=null!==(d=o.is_published)&&void 0!==d?d:o.published)||void 0===f||f),author_id:null!==(h=null!==(p=o.author_id)&&void 0!==p?p:o.authorId)&&void 0!==h?h:null}}}}catch(e){console.warn("Erro ao buscar post na API externa, usando fallback:",e)}let m=await (0,i.zA)();if(m)try{let{collection:n,getDocs:i,query:o,where:a,limit:l}=await Promise.all([t.e(358),t.e(288)]).then(t.bind(t,9842)),s=o(n(m,"posts"),a("slug","==",e),a("is_published","==",!0),l(1)),r=await i(s);if(r.empty)return null;let u=r.docs[0];return{id:u.id,...u.data()}}catch(n){return console.warn("Permiss\xe3o/erro ao buscar post no Firestore, usando demo:",n),a.find(n=>n.slug===e)||null}return a.find(n=>n.slug===e)||null}async function s(e,n){if(o)try{let t=o.replace(/\/$/,""),i="".concat(t,"/posts?limit=").concat(encodeURIComponent(e)).concat(n?"&after=".concat(encodeURIComponent(n)):""),a=await fetch(i,{cache:"no-store"});if(a.ok){let e=await a.json();if(Array.isArray(e))return e.map(e=>{var n,t,i,o,a,l,s,r,u,c,d,f,p;return{id:null!==(i=null!==(t=null!==(n=e.id)&&void 0!==n?n:e._id)&&void 0!==t?t:e.slug)&&void 0!==i?i:Math.random().toString(36).slice(2),slug:null!==(l=e.slug)&&void 0!==l?l:String(null!==(a=null!==(o=e.id)&&void 0!==o?o:e._id)&&void 0!==a?a:""),title:null!==(s=e.title)&&void 0!==s?s:"Sem t\xedtulo",content:null!==(u=null!==(r=e.content)&&void 0!==r?r:e.description)&&void 0!==u?u:"",is_published:!!(null===(d=null!==(c=e.is_published)&&void 0!==c?c:e.published)||void 0===d||d),author_id:null!==(p=null!==(f=e.author_id)&&void 0!==f?f:e.authorId)&&void 0!==p?p:null}})}}catch(e){console.warn("Erro na API externa (pagina\xe7ao), usando fallback:",e)}let l=await (0,i.zA)();if(l)try{let{collection:i,getDocs:o,query:a,where:s,limit:r,orderBy:u,startAfter:c}=await Promise.all([t.e(358),t.e(288)]).then(t.bind(t,9842)),d=n?a(i(l,"posts"),s("is_published","==",!0),u("slug"),c(n),r(e)):a(i(l,"posts"),s("is_published","==",!0),u("slug"),r(e));return(await o(d)).docs.map(e=>({id:e.id,...e.data()}))}catch(o){console.warn("Permiss\xe3o/erro ao paginar Firestore, usando demo:",o);let t=[...a].sort((e,n)=>e.slug.localeCompare(n.slug)),i=0;if(n){let e=t.findIndex(e=>e.slug===n);i=e>=0?e+1:0}return t.slice(i,i+e)}let s=[...a].sort((e,n)=>e.slug.localeCompare(n.slug)),r=0;if(n){let e=s.findIndex(e=>e.slug===n);r=e>=0?e+1:0}return s.slice(r,r+e)}}},function(e){e.O(0,[236,971,23,744],function(){return e(e.s=5144)}),_N_E=e.O()}]);